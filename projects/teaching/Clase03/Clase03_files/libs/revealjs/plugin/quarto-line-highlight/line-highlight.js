window.QuartoLineHighlight=function(){function t(){return/print-pdf/gi.test(window.location.search)}function e(e,n){return!!u.test(n)&&(!t()||!0===e.getConfig().pdfSeparateFragments)}function n(t){t.getRevealElement().querySelectorAll("div.sourceCode").forEach(n=>{if(n.hasAttribute(p)){const r=n.getAttribute(p);if(n.removeAttribute("data-code-line-numbers"),e(t,r)){n.querySelectorAll("pre code").forEach(t=>{t.setAttribute(p,r);const e={currentBlock:t},n=s(r);if(n.length>1){let r=parseInt(t.getAttribute(f),10);r="number"!=typeof r||isNaN(r)?null:r;let l=1;n.slice(1).forEach(n=>{var s=t.cloneNode(!0);s.setAttribute("data-code-line-numbers",a([n])),s.classList.add("fragment"),s.querySelectorAll(":scope > span").forEach(t=>{t.hasAttribute("id")&&t.setAttribute("id",t.getAttribute("id").concat("-"+l))}),l=++l,t.parentNode.appendChild(s),i(s),"number"==typeof r?(s.setAttribute(f,r),r+=1):s.removeAttribute(f),s.addEventListener("visible",o.bind(this,s,e)),s.addEventListener("hidden",o.bind(this,s.previousSibling,e))}),t.removeAttribute(f),t.setAttribute(p,a([n[0]]))}const l="function"==typeof t.closest?t.closest("section:not(.stack)"):null;if(l){const n=function(){o(t,e,!0),l.removeEventListener("visible",n)};l.addEventListener("visible",n)}i(t)})}}})}function i(t){const e=s(t.getAttribute(p));e.length&&e[0].forEach(e=>{t.parentNode.classList.add("code-wrapper"),spanToHighlight=[],"number"==typeof e.last?spanToHighlight=[].slice.call(t.querySelectorAll(":scope > span:nth-child(n+"+e.first+"):nth-child(-n+"+e.last+")")):"number"==typeof e.first&&(spanToHighlight=[].slice.call(t.querySelectorAll(":scope > span:nth-child("+e.first+")"))),spanToHighlight.length&&(spanToHighlight.forEach(t=>t.classList.add("highlight-line")),t.classList.add("has-line-highlights"))})}function o(t,e,n){window.cancelAnimationFrame(e.animationFrameID),e.currentBlock&&(t.scrollTop=e.currentBlock.scrollTop),e.currentBlock=t;const i=r(t);let o=t.offsetHeight;const s=window.getComputedStyle(t);o-=parseInt(s.paddingTop)+parseInt(s.paddingBottom);const a=t.scrollTop;let c=i.top+(Math.min(i.bottom-i.top,o)-o)/2;if(c=Math.max(Math.min(c,t.scrollHeight-o),0),!0===n||a===c)t.scrollTop=c;else{if(t.scrollHeight<=o)return;let n=0;const i=function(){n=Math.min(n+.02,1),t.scrollTop=a+(c-a)*l(n),n<1&&(e.animationFrameID=requestAnimationFrame(i))};i()}}function r(t){const e=t.querySelectorAll(".highlight-line");if(0===e.length)return{top:0,bottom:0};{const t=e[0],n=e[e.length-1];return{top:t.offsetTop,bottom:n.offsetTop+n.offsetHeight}}}function l(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}function s(t){return(t=(t=t.replace("/s/g","")).split(c.step)).map(t=>{return t.split(c.line).map(t=>{if(/^[\d-]+$/.test(t)){return t=t.split(c.lineRange),{first:parseInt(t[0],10),last:t[1]?parseInt(t[1],10):undefined}}return{}})})}function a(t){return t.map(function(t){return t.map(function(t){return"number"==typeof t.last?t.first+c.lineRange+t.last:"number"==typeof t.first?t.first:""}).join(c.line)}).join(c.step)}const c={step:"|",line:",",lineRange:"-"},u=new RegExp("^[\\d"+Object.values(c).join("")+"]+$"),p="data-code-line-numbers",f="data-fragment-index";return{id:"quarto-line-highlight",init:function(t){n(t),t.on("pdf-ready",function(){[].slice.call(t.getRevealElement().querySelectorAll("pre code[data-code-line-numbers].current-fragment")).forEach(function(t){o(t,{},!0)})})}}};